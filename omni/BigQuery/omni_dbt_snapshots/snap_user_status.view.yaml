# Reference this view as omni_dbt_snapshots__snap_user_status
schema_label: ""
#This description was pulled from dbt.
description: |
  SCD Type 2 snapshot tracking changes to user activity status and churn classification over time. Enables churn lifecycle analysis to understand how users transition between active, declining, at_risk, and churned states.

schema: omni_dbt_snapshots
table_name: snap_user_status

dimensions:
  first_event_time: {}
  first_event_date: {}
  last_event_time: {}
  last_event_date: {}
  session_count: {}
  event_count: {}
  total_revenue: {}
  first_purchase_date: {}
  last_purchase_date: {}
  avg_order_value: {}
  customer_lifespan_days: {}
  days_since_last_activity: {}
  has_purchase_history: {}
  data_quality_flag: {}

  user_id:
    format: ID
    #This description was pulled from dbt.
    description: Unique identifier for each user

  purchase_count:
    #This description was pulled from dbt.
    description: Total purchases at time of snapshot

  days_since_last_purchase:
    #This description was pulled from dbt.
    description: Days since last purchase at time of snapshot

  customer_ltv:
    #This description was pulled from dbt.
    description: Customer lifetime value at time of snapshot

  activity_status:
    #This description was pulled from dbt.
    description: User activity classification (active, declining, at_risk, churned,
      prospect)

  is_churned:
    #This description was pulled from dbt.
    description: Binary flag indicating if user has churned

  dbt_scd_id:
    format: ID
    #This description was pulled from dbt.
    description: Surrogate key for the snapshot record

  dbt_updated_at:
    #This description was pulled from dbt.
    description: Timestamp when the snapshot record was last updated

  dbt_valid_from:
    #This description was pulled from dbt.
    description: Timestamp when this version of the record became valid

  dbt_valid_to:
    #This description was pulled from dbt.
    description: Timestamp when this version was superseded (null if current)

measures:
  count:
    aggregate_type: count

#The info below was pulled from your dbt repository and is read-only.
dbt:
  name: snap_user_status
  target_schema: estore
  description: |
    SCD Type 2 snapshot tracking changes to user activity status and churn classification over time. Enables churn lifecycle analysis to understand how users transition between active, declining, at_risk, and churned states.
  config:
    schema: snapshots
    materialized: snapshot
  code: select * from {{ ref('dim_users') }}
