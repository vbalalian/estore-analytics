version: 2

models:
  - name: dim_user_rfm
    description: "Dimension table for User RFM (Recency, Frequency, Monetary) analysis"
    config:
      contract:
        enforced: false
    columns:
      - name: user_id
        description: "Unique identifier for each user"
        data_type: string
        constraints:
          - type: not_null
        tests:
          - not_null
          - unique
      - name: days_since_last_purchase
        description: "Number of days since the user's last purchase"
        data_type: integer
        constraints:
          - type: not_null
        tests:
          - not_null
      - name: purchase_count
        description: "Total number of purchases made by the user"
        data_type: integer
        constraints:
          - type: not_null
        tests:
          - not_null
      - name: total_revenue
        description: "Total revenue generated by the user"
        data_type: float
        constraints:
          - type: not_null
        tests:
          - not_null
      - name: recency_score
        description: "Recency score of the user"
        data_type: integer
        constraints:
          - type: not_null
        tests:
          - not_null
      - name: frequency_score
        description: "Frequency score of the user"
        data_type: integer
        constraints:
          - type: not_null
        tests:
          - not_null
      - name: monetary_score
        description: "Monetary score of the user"
        data_type: integer
        constraints:
          - type: not_null
        tests:
          - not_null
      - name: rfm_score
        description: "Total RFM score calculated as the sum of recency, frequency, and monetary scores"
        data_type: integer
        constraints:
          - type: not_null
        tests:
          - not_null
      - name: rfm_segment
        description: "RFM segment classification based on RFM scores"
        data_type: string
        constraints:
          - type: not_null
        tests:
          - not_null