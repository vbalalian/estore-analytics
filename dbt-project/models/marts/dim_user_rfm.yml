version: 2

models:
  - name: dim_user_rfm
    description: >
      RFM segmentation dimension. Contains only RFM-specific scores and segments.
      Join to dim_users on user_id for lifecycle metrics (revenue, purchase history, etc.).
    config:
      contract:
        enforced: false
    columns:
      - name: user_id
        description: "Foreign key to dim_users"
        data_type: string
        constraints:
          - type: not_null
        tests:
          - not_null
          - unique
      - name: recency_score
        description: "Recency score of the user"
        data_type: integer
        constraints:
          - type: not_null
        tests:
          - not_null
      - name: frequency_score
        description: "Frequency score of the user"
        data_type: integer
        constraints:
          - type: not_null
        tests:
          - not_null
      - name: monetary_score
        description: "Monetary score of the user"
        data_type: integer
        constraints:
          - type: not_null
        tests:
          - not_null
      - name: rfm_score
        description: "Total RFM score calculated as the sum of recency, frequency, and monetary scores"
        data_type: integer
        constraints:
          - type: not_null
        tests:
          - not_null
      - name: rfm_segment
        description: "RFM segment classification based on RFM scores"
        data_type: string
        constraints:
          - type: not_null
        tests:
          - not_null