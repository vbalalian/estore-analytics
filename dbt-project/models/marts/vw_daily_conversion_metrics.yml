version: 2

models:
  - name: vw_daily_conversion_metrics
    description: "Daily conversion funnel metrics filtered from metrics_conversion_rates. Provides a simplified view for Tableau dashboards."
    columns:
      - name: metric_date
        description: "The date for which the metrics are calculated."
        data_type: date
        tests:
          - not_null
          - unique

      - name: total_sessions
        description: "Total number of sessions on this date."
        data_type: integer
        tests:
          - not_null

      - name: sessions_with_view
        description: "Number of sessions that included at least one product view."
        data_type: integer
        tests:
          - not_null

      - name: sessions_with_cart
        description: "Number of sessions that included at least one add-to-cart event."
        data_type: integer
        tests:
          - not_null

      - name: sessions_with_purchase
        description: "Number of sessions that included at least one purchase."
        data_type: integer
        tests:
          - not_null

      - name: view_to_cart_rate
        description: "Conversion rate from view to cart (sessions_with_cart / sessions_with_view)."
        data_type: float
        tests:
          - not_null

      - name: cart_to_purchase_rate
        description: "Conversion rate from cart to purchase (sessions_with_purchase / sessions_with_cart)."
        data_type: float
        tests:
          - not_null

      - name: view_to_purchase_rate
        description: "Overall conversion rate from view to purchase (sessions_with_purchase / sessions_with_view)."
        data_type: float
        tests:
          - not_null

      - name: avg_order_value
        description: "Average order value for purchase sessions on this date."
        data_type: float
