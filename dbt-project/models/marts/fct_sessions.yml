version: 2

models: 
  - name: fct_sessions
    description: >
      Fact table for user sessions. Extracted from staging events data.
    config:
      contract:
        enforced: false
    columns:
      - name: session_id
        description: "Unique identifier for the user session"
        tests:
          - not_null
          - unique

      - name: user_id
        description: "Identifier for the user who initiated the session"
        tests:
          - not_null

      - name: session_start_time
        description: "Timestamp when the session started"
        tests:
          - not_null

      - name: session_end_time
        description: "Timestamp when the session ended"
        tests:
          - not_null

      - name: event_count
        description: "Total number of events that occurred during the session"
        tests:
          - not_null

      - name: unique_product_count
        description: "Number of unique products interacted with during the session"
        tests:
          - not_null

      - name: cart_additions
        description: "Total number of add-to-cart events during the session"

      - name: purchase_count
        description: "Total number of purchase events during the session"
      
      - name: view_count
        description: "Total number of view events during the session"

      - name: total_revenue
        description: "Total revenue generated from purchase events during the session"

      - name: reached_view
        description: "Indicator if the session included at least one view event"
      
      - name: reached_cart
        description: "Indicator if the session included at least one add-to-cart event"
      
      - name: reached_purchase
        description: "Indicator if the session included at least one purchase event"

      - name: funnel_stage
        description: "Furthest stage reached in the purchase funnel during the session"